1 ГЛАВА 1. Введение
1.1 Немного истории
1.2 Виртуальная машина Java
1.3 Краткое содержание глав
1.4 Принятые обозначения
2 ГЛАВА 2. Структура виртуальной машины Java
2.1 Формат class файла
2.2 Типы данных
2.3 Примитивные типы и значения
2.3.1 Целочисленные типы и их значения
2.3.2 Типы данных с плавающей точкой, множества значений и значения
2.3.3 Тип returnAddress и его значения
2.3.4 Тип boolean
2.4 Ссылочные типы и их значения
2.5 Области данных времени выполнения
2.5.1 Регистр pc
2.5.2 Стек виртуальной машины Java
2.5.3 Куча
2.5.4 Область методов
2.5.5 Хранилище констант времени выполнения (константный пул)
2.5.6 Стеки Native методов
2.6 Фреймы
2.6.1 Локальные переменные
2.6.2 Стек операндов
2.6.3 Динамическое связывание
2.6.4 Нормальное завершение вызова метода
2.6.5 Аварийное завершение вызова метода
2.7 Представление объектов
2.8 Арифметика чисел с плавающей точкой
2.8.1 Арифметика чисел с плавающей точкой виртуальной машины Java и стандарт IEEE 754
2.8.2 Режимы работы с плавающей точкой
2.8.3 Правила преобразования множества значений
2.9 Специальные методы
2.10 Исключения
2.11 Обзор инструкций
2.11.1 Типы данных и виртуальная машина Java
2.11.2 Инструкции загрузки и считывания
2.11.3 Арифметические инструкции
2.11.4 Инструкции преобразования типов
2.11.5 Создание и работа с объектами
2.11.6 Инструкции для работы со стеком операндов
2.11.7 Инструкции передачи управления
2.11.8 Вызов методов и инструкции возврата
2.11.9 Формирование исключений
2.11.10 Синхронизация
2.12 Библиотека классов
2.13 Открытый дизайн, закрытая реализация
3 ГЛАВА 3. Компиляция программ в код виртуальной машины Java
3.1 Формат примеров
3.2 Использование констант, локальных переменных и управляющих структур
3.3 Арифметика
3.4 Доступ к константному пулу времени выполнения
3.5 Передача управления
3.6 Получение аргументов
3.7 Вызов методов
3.8 Работа с экземплярами класса
3.9 Массивы
3.10 Компилирование операторов switch
3.11 Операции со стеком операндов
3.12 Генерация и обработка исключений
3.13 Компиляция инструкции finally
3.14 Компиляция инструкций синхронизации
3.15 Аннотации
4 ГЛАВА 4. Формат class-файла
4.1 Структура ClassFile
4.2 Внутренняя форма имён
4.2.1 Имена двоичных классов и интерфейсов
4.2.2 Сокращенная форма имен
4.3 Дескрипторы и сигнатуры
4.3.1 Грамматика обозначений дескрипторов и сигнатур
4.3.2 Дескрипторы поля
4.3.3 Дескрипторы методов
4.3.4 Сигнатуры
4.4 Константный пул
4.4.1 Структура CONSTANT_Class_info
4.4.2 Структуры CONSTANT_Fieldref_info, CONSTANT_Methodref_info и CONSTANT_InterfaceMethodref_info
4.4.3 Структура CONSTANT_String_info
4.4.4 Структуры CONSTANT_Integer_info и CONSTANT_Float_info
4.4.5 Структуры CONSTANT_Long_info и CONSTANT_Double_info
4.4.6 Структура CONSTANT_NameAndType_info
4.4.7 Структура CONSTANT_Utf8_info
4.4.8 Структура CONSTANT_MethodHandle_info
4.4.9 Структура CONSTANT_MethodType_info
4.4.10 Структура CONSTANT_InvokeDynamic_info
4.5 Поля
4.6 Методы
4.7 Атрибуты
4.7.1 Определение и именование новых атрибутов
4.7.2 Атрибут ConstantValue
4.7.3 Атрибут Code
4.7.4 Атрибут StackMapTable
4.7.5 Атрибут Exceptions
4.7.6 Атрибут InnerClasses
4.7.7 Атрибут EnclosingMethod
4.7.8 Атрибут Synthetic
4.7.9 Атрибут Signature
4.7.10 Атрибут SourceFile
4.7.11 Атрибут SourceDebugExtension
4.7.12 Атрибут LineNumberTable
4.7.13 Атрибут LocalVariableTable
4.7.14 Атрибут LocalVariableTypeTable
4.7.15 Атрибут Deprecated
4.7.16 Атрибут RuntimeVisibleAnnotations
4.7.16.1 Структура element_value
4.7.17 Атрибут RuntimeInvisibleAnnotations
4.7.18 Атрибут RuntimeVisibleParameterAnnotations
4.7.19 Атрибут RuntimeInvisibleParameterAnnotations
4.7.20 Атрибут AnnotationDefault
4.7.21 Атрибут BootstrapMethods
4.8 Проверка формата
4.9 Ограничения для кода виртуальной машины Java
4.9.1 Статические ограничения
4.9.2 Структурные ограничения
4.10 Проверка class-файлов
4.10.1 Проверка сравнением типов
4.10.1.1 Иерархия типов
4.10.1.2 Правила подтипов
4.10.1.3 Правила проверки типов
4.10.1.3.1 Средства доступа
4.10.1.3.2 Абстрактные методы и методы Native
4.10.1.3.3 Проверка кода
4.10.1.3.4 Комбинирование потоков стековых соответствий и инструкций
4.10.1.3.5 Обработка исключений
4.10.1.4 Инструкции
4.10.1.4.1 Изоморфные инструкции
4.10.1.4.2 Манипулирование стеком операндов
4.10.1.4.3 Инструкции загрузки
4.10.1.4.4 Инструкции сохранения
4.10.1.4.5 Список инструкций
4.10.2 Проверка по типам интерфейса
4.10.2.1 Процесс проверки по типам интерфейса
4.10.2.2 Верификатор байткода
4.10.2.3 Значения с типами long и double
4.10.2.4 Методы, инициализирующие экземпляр, и только что созданные объекты
4.10.2.5 Исключения и блок finally
4.11 Ограничения виртуальной машины Java
5 ГЛАВА 5. Загрузка, компоновка и инициализация
5.1 Константный пул времени выполнения
5.2 Запуск виртуальной машины
5.3 Создание и загрузка
5.3.1 Загрузка с помощью начального загрузчика классов
5.3.2 Загрузка с помощью пользовательского загрузчика классов
5.3.3 Создание массивов
5.3.4 Ограничения загрузки
5.3.5 Создание класса на основе данных class-файла
5.4 Компоновка
5.4.1 Проверка
5.4.2 Подготовка
5.4.3 Разрешение
5.4.3.1 Разрешение классов и интерфейсов
5.4.3.2 Разрешение поля
5.4.3.3 Разрешение метода
5.4.3.4 Разрешение метода интерфейса
5.4.3.5 Разрешение типов методов и обработчиков методов
5.4.3.6 Разрешение спецификатора узла вызова
5.4.4 Управление доступом
5.4.5 Замещение методов
5.5 Инициализация
5.6 Связывание платформенно зависимых методов
5.7 Завершение работы виртуальной машины
6 ГЛАВА 6. Набор инструкций виртуальной машины Java
6.1 Допущения: значение слова «обязательный»
6.2 Зарезервированные коды операций
6.3 Ошибки виртуальной машины
6.4 Формат описания инструкций
6.5 Инструкции
7 ГЛАВА 7 Таблица инструкций по возрастанию их байт-кодов